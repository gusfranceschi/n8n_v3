{"createdAt":"2025-06-02T14:43:00.226Z","updatedAt":"2025-06-23T19:35:15.432Z","id":"rlYYncZeUqjrevw7","name":"11 - ATUALIZA THUMB - PT","active":true,"isArchived":false,"nodes":[{"parameters":{"model":{"__rl":true,"value":"gpt-4o-mini","mode":"list","cachedResultName":"gpt-4o-mini"},"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[-2100,320],"id":"bc0f8cf4-ac09-469d-a05c-3a4beecdf17d","name":"OpenAI Chat Model","credentials":{"openAiApi":{"id":"aFIpFp2J06rY600P","name":"OpenAi account"}}},{"parameters":{"rule":{"interval":[{"field":"hours"}]}},"type":"n8n-nodes-base.scheduleTrigger","typeVersion":1.2,"position":[-3680,100],"id":"7acfc33c-a554-4e9e-9f00-a78f97a6e669","name":"Verifica√ß√£o Peri√≥dica"},{"parameters":{"resource":"list","operation":"getCards","id":"={{ $item(\"0\").$node[\"Edit Fields\"].json[\"THUMB\"] }}","returnAll":true,"additionalFields":{}},"type":"n8n-nodes-base.trello","typeVersion":1,"position":[-3240,100],"id":"f9dbdd36-3a6d-46a8-9cad-46d0db50bcfb","name":"Buscar V√≠deos Prontos para Miniatura","credentials":{"trelloApi":{"id":"jIAgqh5oR1xZHXtP","name":"Trello account"}}},{"parameters":{},"type":"n8n-nodes-base.limit","typeVersion":1,"position":[-2580,100],"id":"35ed4194-3b5f-4932-a9b1-5dde70c95aa2","name":"Selecionar Pr√≥ximo V√≠deo"},{"parameters":{"promptType":"define","text":"={{ $json.desc }}","hasOutputParser":true,"options":{}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":1.8,"position":[-2140,100],"id":"7c7a7b34-3f69-4542-b480-9ed5d645316d","name":"Extrair Dados do V√≠deo"},{"parameters":{"jsonSchemaExample":"{\n\"t√≠tulo\": \"{{ $('Edit Fields2').item.json.pasta }}\",\n\"pasta\": \"{{ $('Edit Fields2').item.json.pasta }}\",\n\"id\": \"{{ $('Edit Fields2').item.json.audiolongo1 }}\",\n\"url\": \"{{ $('Edit Fields2').item.json.audiolongo2 }}\",\n\"data\": \"{{ $('Edit Fields2').item.json.audiolongo2 }}\",\n\"thumb\": \"{{ $('Edit Fields2').item.json.audiolongo2 }}\"\n}"},"type":"@n8n/n8n-nodes-langchain.outputParserStructured","typeVersion":1.2,"position":[-1980,320],"id":"cb66e180-7c72-4fcf-a7a3-afacaf78b523","name":"Formatador de Dados JSON"},{"parameters":{"command":"=npx n8n export:credentials --backup --decrypted --output=/home/node/n8n/backups/credentials/"},"id":"6ea3b0e4-a63e-4ec8-8966-019ae947dbb6","name":"Exportar Credenciais do YouTube","type":"n8n-nodes-base.executeCommand","typeVersion":1,"position":[-1320,100]},{"parameters":{"fileSelector":"=/home/node/n8n/backups/credentials/*.json"},"id":"fc3a4bfe-d5b9-4a28-8970-fcd1a5947ae0","name":"Ler Arquivos de Credenciais","type":"n8n-nodes-base.readBinaryFiles","typeVersion":1,"position":[-1100,100]},{"parameters":{"options":{}},"id":"a1f71c30-7ce1-4dd6-b56f-539ff33164d9","name":"Converter JSON para Bin√°rio","type":"n8n-nodes-base.moveBinaryData","typeVersion":1,"position":[-880,100]},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"2ba115bc-f294-421f-b1ca-1388605a23e7","leftValue":"={{ $json.name }}","rightValue":"={{ $item(\"0\").$node[\"Edit Fields\"].json[\"Canal\"] }}","operator":{"type":"string","operation":"contains"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.filter","typeVersion":2.2,"position":[-660,100],"id":"21cf2fef-f4b4-43af-a039-6e60accd0c70","name":"Filtrar Credencial do Canal"},{"parameters":{"url":"=https://drive.google.com/uc?export=download&id={{ $item(\"0\").$node[\"Extrair Dados do V√≠deo\"].json[\"output\"][\"thumb\"] }}","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-440,100],"id":"46984107-3aa5-4f7c-ac9f-fe6ec330003c","name":"Baixar Imagem de Miniatura"},{"parameters":{"method":"POST","url":"https://www.googleapis.com/upload/youtube/v3/thumbnails/set","sendQuery":true,"queryParameters":{"parameters":[{"name":"videoId","value":"={{ $item(\"0\").$node[\"Extrair Dados do V√≠deo\"].json[\"output\"][\"id\"] }}"},{"name":"uploadType","value":"media"}]},"sendHeaders":true,"headerParameters":{"parameters":[{"name":"Authorization","value":"=Bearer {{ $json.data.oauthTokenData.access_token }}"}]},"sendBody":true,"contentType":"binaryData","inputDataFieldName":"data","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-220,100],"id":"4ec66ef1-1c98-40e2-89ac-bf8e01bb8515","name":"Enviar Miniatura para YouTube","onError":"continueErrorOutput"},{"parameters":{"operation":"update","id":{"__rl":true,"value":"={{ $('Selecionar Pr√≥ximo V√≠deo').item.json.id }}","mode":"id"},"updateFields":{"desc":"={{ $('Extrair Dados do V√≠deo').item.json.output[\"t√≠tulo\"] }}\n---\n\nüìÖ V√≠deo programado para **{{ $item(\"0\").$node[\"Extrair Dados do V√≠deo\"].json[\"output\"][\"data\"] }}** √†s **20h**\n\nüìÅ [Pasta no Google Drive](https://drive.google.com/drive/folders/{{ $('Extrair Dados do V√≠deo').item.json.output.pasta }}?hl=pt-br)\n\n‚ñ∂Ô∏è [Assista ao v√≠deo]( {{ $('Extrair Dados do V√≠deo').item.json.output.url }} )\n"}},"type":"n8n-nodes-base.trello","typeVersion":1,"position":[0,0],"id":"e4800a72-69ad-46a2-bc31-ded4cd60dd25","name":"Atualizar Detalhes do Cart√£o","credentials":{"trelloApi":{"id":"jIAgqh5oR1xZHXtP","name":"Trello account"}}},{"parameters":{"operation":"update","id":{"__rl":true,"value":"={{ $json.id }}","mode":"id"},"updateFields":{"idList":"={{ $item(\"0\").$node[\"Edit Fields\"].json[\"FINALIZADOS\"] }}"}},"type":"n8n-nodes-base.trello","typeVersion":1,"position":[220,0],"id":"98d4f293-e93d-4c82-a55a-d69b455f57c9","name":"Mover Cart√£o para \"FINALIZADOS ‚úÖ\"","credentials":{"trelloApi":{"id":"jIAgqh5oR1xZHXtP","name":"Trello account"}}},{"parameters":{},"type":"n8n-nodes-base.errorTrigger","typeVersion":1,"position":[-3680,460],"id":"05b41832-3718-4fde-9d72-b44e17a74b56","name":"Detector de Falhas"},{"parameters":{"chatId":"-1002615111216","text":"=11 - ATUALIZA THUMB PT","additionalFields":{"appendAttribution":false,"message_thread_id":5}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[-3460,460],"id":"f18f98b0-088a-485b-a8b7-f393265d2e4e","name":"Notifica√ß√£o de Erro no Telegram","webhookId":"69e81cf7-6366-4150-8ea9-0179f2447587","credentials":{"telegramApi":{"id":"KbYurROyBoGKf7Ks","name":"Telegram account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"015448b3-2848-46c1-92d6-cc3f867bbed1","leftValue":"={{ $json.name }}","rightValue":"\"STOP\"","operator":{"type":"string","operation":"notContains"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.filter","typeVersion":2.2,"position":[-3020,100],"id":"92d9fd54-43b6-4c21-87f2-9b3f45996e9e","name":"Exclui Cards em \"STOP\""},{"parameters":{"operation":"update","id":{"__rl":true,"value":"={{ $json.id }}","mode":"id"},"updateFields":{"name":"={{ $item(\"0\").$node[\"Selecionar Pr√≥ximo V√≠deo\"].json[\"name\"] }} \"STOP\""}},"type":"n8n-nodes-base.trello","typeVersion":1,"position":[-2360,100],"id":"c7843615-c4cc-4639-a70b-db332bad5335","name":"Atualizar Cart√£o com \"STOP\"","credentials":{"trelloApi":{"id":"jIAgqh5oR1xZHXtP","name":"Trello account"}}},{"parameters":{"operation":"update","id":{"__rl":true,"value":"={{ $json.id }}","mode":"id"},"updateFields":{"name":"={{ $item(\"0\").$node[\"Selecionar Pr√≥ximo V√≠deo\"].json[\"name\"] }}"}},"type":"n8n-nodes-base.trello","typeVersion":1,"position":[440,0],"id":"debde9d7-7e2c-4473-b502-5518030a7436","name":"Remove \"STOP\"","credentials":{"trelloApi":{"id":"jIAgqh5oR1xZHXtP","name":"Trello account"}}},{"parameters":{"operation":"update","id":{"__rl":true,"value":"={{ $item(\"0\").$node[\"Selecionar Pr√≥ximo V√≠deo\"].json[\"id\"] }}","mode":"id"},"updateFields":{"name":"={{ $item(\"0\").$node[\"Selecionar Pr√≥ximo V√≠deo\"].json[\"name\"] }}"}},"type":"n8n-nodes-base.trello","typeVersion":1,"position":[0,200],"id":"5c13eb7b-f524-4287-acf3-c2028579656c","name":"Remove \"STOP\" 2","credentials":{"trelloApi":{"id":"jIAgqh5oR1xZHXtP","name":"Trello account"}}},{"parameters":{"chatId":"-1002615111216","text":"=11 - ATUALIZA THUMB","additionalFields":{"appendAttribution":false,"message_thread_id":4}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[220,200],"id":"f2749aeb-7497-4649-aee7-425f67358fca","name":"Notifica√ß√£o de Erro no Telegram 2","webhookId":"69e81cf7-6366-4150-8ea9-0179f2447587","credentials":{"telegramApi":{"id":"KbYurROyBoGKf7Ks","name":"Telegram account"}}},{"parameters":{"workflowId":{"__rl":true,"value":"U3k48GddiML0cpuS","mode":"list","cachedResultName":"13 - ATUALIZA CREDENCIAL DO YOUTUBE"},"workflowInputs":{"mappingMode":"defineBelow","value":{},"matchingColumns":[],"schema":[],"attemptToConvertTypes":false,"convertFieldsToString":true},"options":{}},"type":"n8n-nodes-base.executeWorkflow","typeVersion":1.2,"position":[-1760,100],"id":"0383161d-feba-4dd0-b37c-34770333d086","name":"Execute Workflow"},{"parameters":{"assignments":{"assignments":[{"id":"41fb9577-343d-439a-bacf-65018b3f194c","name":"THUMB","value":"682b2e0278df7956373f0b4b","type":"string"},{"id":"948aa1b6-75d6-4cf6-9cd1-629b97a571d6","name":"FINALIZADOS","value":"682b2e0278df7956373f0b52","type":"string"},{"id":"8ae9c544-1471-41fb-aaa2-22ca9c379bb0","name":"Canal","value":"@historiasqueomundoesconde","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-3460,100],"id":"2c82b963-154e-4d27-a09a-7ee0ecb2c939","name":"Edit Fields"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"84fe8237-2afc-4558-bd5c-27884d56222e","leftValue":"={{ $json.name }}","rightValue":"={{ $item(\"0\").$node[\"Edit Fields\"].json[\"Canal\"] }}","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.filter","typeVersion":2.2,"position":[-2800,100],"id":"f2fbfd54-061a-44dc-a69f-ffc296fc9ab6","name":"Filtra por Nome do Canal"},{"parameters":{},"type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[-1540,100],"id":"ed5a9507-c65e-47ab-a625-a17908ab1e5a","name":"Wait","webhookId":"4ba7b318-5fd9-41f8-af79-9b4626b2fe4c"}],"connections":{"OpenAI Chat Model":{"ai_languageModel":[[{"node":"Extrair Dados do V√≠deo","type":"ai_languageModel","index":0}]]},"Verifica√ß√£o Peri√≥dica":{"main":[[{"node":"Edit Fields","type":"main","index":0}]]},"Buscar V√≠deos Prontos para Miniatura":{"main":[[{"node":"Exclui Cards em \"STOP\"","type":"main","index":0}]]},"Selecionar Pr√≥ximo V√≠deo":{"main":[[{"node":"Atualizar Cart√£o com \"STOP\"","type":"main","index":0}]]},"Extrair Dados do V√≠deo":{"main":[[{"node":"Execute Workflow","type":"main","index":0}]]},"Formatador de Dados JSON":{"ai_outputParser":[[{"node":"Extrair Dados do V√≠deo","type":"ai_outputParser","index":0}]]},"Exportar Credenciais do YouTube":{"main":[[{"node":"Ler Arquivos de Credenciais","type":"main","index":0}]]},"Ler Arquivos de Credenciais":{"main":[[{"node":"Converter JSON para Bin√°rio","type":"main","index":0}]]},"Converter JSON para Bin√°rio":{"main":[[{"node":"Filtrar Credencial do Canal","type":"main","index":0}]]},"Filtrar Credencial do Canal":{"main":[[{"node":"Baixar Imagem de Miniatura","type":"main","index":0}]]},"Baixar Imagem de Miniatura":{"main":[[{"node":"Enviar Miniatura para YouTube","type":"main","index":0}]]},"Enviar Miniatura para YouTube":{"main":[[{"node":"Atualizar Detalhes do Cart√£o","type":"main","index":0}],[{"node":"Remove \"STOP\" 2","type":"main","index":0}]]},"Atualizar Detalhes do Cart√£o":{"main":[[{"node":"Mover Cart√£o para \"FINALIZADOS ‚úÖ\"","type":"main","index":0}]]},"Mover Cart√£o para \"FINALIZADOS ‚úÖ\"":{"main":[[{"node":"Remove \"STOP\"","type":"main","index":0}]]},"Detector de Falhas":{"main":[[{"node":"Notifica√ß√£o de Erro no Telegram","type":"main","index":0}]]},"Exclui Cards em \"STOP\"":{"main":[[{"node":"Filtra por Nome do Canal","type":"main","index":0}]]},"Atualizar Cart√£o com \"STOP\"":{"main":[[{"node":"Extrair Dados do V√≠deo","type":"main","index":0}]]},"Remove \"STOP\" 2":{"main":[[{"node":"Notifica√ß√£o de Erro no Telegram 2","type":"main","index":0}]]},"Execute Workflow":{"main":[[{"node":"Wait","type":"main","index":0}]]},"Edit Fields":{"main":[[{"node":"Buscar V√≠deos Prontos para Miniatura","type":"main","index":0}]]},"Filtra por Nome do Canal":{"main":[[{"node":"Selecionar Pr√≥ximo V√≠deo","type":"main","index":0}]]},"Wait":{"main":[[{"node":"Exportar Credenciais do YouTube","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":{"node:Verifica√ß√£o Peri√≥dica":{"recurrenceRules":[]}},"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"76624fc9-3c93-41f5-b967-ee7e6b6b6caa","triggerCount":1,"tags":[{"createdAt":"2025-06-03T13:08:52.656Z","updatedAt":"2025-06-03T13:08:52.656Z","id":"5X46tRV4lwQwBhLN","name":"teste ok"}]}